<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Development environment #  We&rsquo;re going to build two applications:
 An on-chain one: a set of smart contracts deployed on Ethereum. An off-chain one: a front-end application that will interact with the smart contracts.  While the front-end application development is part of this book, it won&rsquo;t be our main focus. We will build it solely to demonstrate how smart contracts are integrated with front-end applications. Thus, the front-end application is optional, but I&rsquo;ll still provide the code."><meta name=theme-color content="#FFFFFF"><meta name=color-scheme content="light dark"><meta property="og:title" content="Development Environment"><meta property="og:description" content="Development environment #  We&rsquo;re going to build two applications:
 An on-chain one: a set of smart contracts deployed on Ethereum. An off-chain one: a front-end application that will interact with the smart contracts.  While the front-end application development is part of this book, it won&rsquo;t be our main focus. We will build it solely to demonstrate how smart contracts are integrated with front-end applications. Thus, the front-end application is optional, but I&rsquo;ll still provide the code."><meta property="og:type" content="article"><meta property="og:url" content="https://uniswapv3book.com/docs/introduction/dev-environment/"><meta property="article:section" content="docs"><title>Development Environment | Uniswap V3 Development Book</title><link rel=manifest href=/manifest.json><link rel=icon href=/favicon.png type=image/x-icon><link rel=stylesheet href=/book.min.82c5dbd23447cee0b4c2aa3ed08ce0961faa40e1fa370eee4f8c9f02e0d46b5f.css integrity="sha256-gsXb0jRHzuC0wqo+0Izglh+qQOH6Nw7uT4yfAuDUa18=" crossorigin=anonymous><script defer src=/flexsearch.min.js></script>
<script defer src=/en.search.min.b0360dea9154348d79406c9c19eeb0985101e9918359a842737f3d85d0ad9739.js integrity="sha256-sDYN6pFUNI15QGycGe6wmFEB6ZGDWahCc389hdCtlzk=" crossorigin=anonymous></script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/><span>Uniswap V3 Development Book</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul><li class=book-section-flat><span>Milestone 0. 简介</span><ul><li><a href=/docs/introduction/introduction-to-markets/>交易市场简介</a></li><li><a href=/docs/introduction/constant-function-market-maker/>恒定乘积做市商(CFMM)</a></li><li><a href=/docs/introduction/uniswap-v3/>Uniswap V3</a></li><li><a href=/docs/introduction/dev-environment/ class=active>Development Environment</a></li></ul></li><li class=book-section-flat><span>Milestone 1. First Swap</span><ul><li><a href=/docs/milestone_1/introduction/>Introduction</a></li><li><a href=/docs/milestone_1/calculating-liquidity/>Calculating Liquidity</a></li><li><a href=/docs/milestone_1/providing-liquidity/>Providing Liquidity</a></li><li><a href=/docs/milestone_1/first-swap/>First Swap</a></li><li><a href=/docs/milestone_1/manager-contract/>Manager Contract</a></li><li><a href=/docs/milestone_1/deployment/>Deployment</a></li><li><a href=/docs/milestone_1/user-interface/>User Interface</a></li></ul></li><li class=book-section-flat><span>Milestone 2. Second Swap</span><ul><li><a href=/docs/milestone_2/introduction/>Introduction</a></li><li><a href=/docs/milestone_2/output-amount-calculation/>Output Amount Calculation</a></li><li><a href=/docs/milestone_2/math-in-solidity/>Math in Solidity</a></li><li><a href=/docs/milestone_2/tick-bitmap-index/>Tick Bitmap Index</a></li><li><a href=/docs/milestone_2/generalize-minting/>Generalize Minting</a></li><li><a href=/docs/milestone_2/generalize-swapping/>Generalize Swapping</a></li><li><a href=/docs/milestone_2/quoter-contract/>Quoter Contract</a></li><li><a href=/docs/milestone_2/user-interface/>User Interface</a></li></ul></li><li class=book-section-flat><span>Milestone 3. Cross-tick Swaps</span><ul><li><a href=/docs/milestone_3/introduction/>Introduction</a></li><li><a href=/docs/milestone_3/different-ranges/>Different Price Ranges</a></li><li><a href=/docs/milestone_3/cross-tick-swaps/>Cross-Tick Swaps</a></li><li><a href=/docs/milestone_3/slippage-protection/>Slippage Protection</a></li><li><a href=/docs/milestone_3/liquidity-calculation/>Liquidity Calculation</a></li><li><a href=/docs/milestone_3/more-on-fixed-point-numbers/>A Little Bit More on Fixed-point Numbers</a></li><li><a href=/docs/milestone_3/flash-loans/>Flash Loans</a></li><li><a href=/docs/milestone_3/user-interface/>User Interface</a></li></ul></li><li class=book-section-flat><span>Milestone 4. Multi-pool Swaps</span><ul><li><a href=/docs/milestone_4/introduction/>Introduction</a></li><li><a href=/docs/milestone_4/factory-contract/>Factory Contract</a></li><li><a href=/docs/milestone_4/path/>Swap Path</a></li><li><a href=/docs/milestone_4/multi-pool-swaps/>Multi-pool Swaps</a></li><li><a href=/docs/milestone_4/user-interface/>User Interface</a></li><li><a href=/docs/milestone_4/tick-rounding/>Tick Rounding</a></li></ul></li><li class=book-section-flat><span>Milestone 5. Fees and Price Oracle</span><ul><li><a href=/docs/milestone_5/introduction/>Introduction</a></li><li><a href=/docs/milestone_5/swap-fees/>Swap Fees</a></li><li><a href=/docs/milestone_5/flash-loan-fees/>Flash Loan Fees</a></li><li><a href=/docs/milestone_5/protocol-fees/>Protocol Fees</a></li><li><a href=/docs/milestone_5/price-oracle/>Price Oracle</a></li><li><a href=/docs/milestone_5/user-interface/>User Interface</a></li></ul></li><li class=book-section-flat><span>Milestone 6: NFT positions</span><ul><li><a href=/docs/milestone_6/introduction/>Introduction</a></li><li><a href=/docs/milestone_6/erc721-overview/>ERC721 Overview</a></li><li><a href=/docs/milestone_6/nft-manager/>NFT Manager</a></li><li><a href=/docs/milestone_6/nft-renderer/>NFT Renderer</a></li></ul></li><li class=book-section-flat><span>补充资料</span><ul><li><a href=/docs/reference/dictionary/>中英名词对照</a></li></ul></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu></label>
<strong>Development Environment</strong>
<label for=toc-control><img src=/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#development-environment>Development environment</a><ul><li><a href=#quick-introduction-to-ethereum>Quick Introduction to Ethereum</a></li><li><a href=#local-development-environment>Local Development Environment</a><ul><li><a href=#foundry>Foundry</a></li><li><a href=#ethersjs>Ethers.js</a></li><li><a href=#metamask>MetaMask</a></li><li><a href=#react>React</a></li></ul></li><li><a href=#setting-up-the-project>Setting Up the Project</a></li></ul></li></ul></nav></aside></header><article class=markdown><h1 id=development-environment>Development environment
<a class=anchor href=#development-environment>#</a></h1><p>We&rsquo;re going to build two applications:</p><ol><li>An on-chain one: a set of smart contracts deployed on Ethereum.</li><li>An off-chain one: a front-end application that will interact with the smart contracts.</li></ol><p>While the front-end application development is part of this book, it won&rsquo;t be our main focus. We will build it solely to
demonstrate how smart contracts are integrated with front-end applications. Thus, the front-end application is optional,
but I&rsquo;ll still provide the code.</p><h2 id=quick-introduction-to-ethereum>Quick Introduction to Ethereum
<a class=anchor href=#quick-introduction-to-ethereum>#</a></h2><p>Ethereum is a blockchain that allows anyone to run applications on it. It might look like a cloud provider, but there are
multiple differences:</p><ol><li>You don&rsquo;t pay for hosting your application. But you pay for deployment.</li><li>Your application is immutable. That is: you won&rsquo;t be able to modify it after it&rsquo;s deployed.</li><li>Users will pay to use your application.</li></ol><p>To better understand these moments, let&rsquo;s see what Ethereum is made of.</p><p>At the core of Ethereum (and any other blockchain) is a database. The most valuable data in Ethereum&rsquo;s database is
<em>the state of accounts</em>. An account is an Ethereum address with associated data:</p><ol><li>Balance: account&rsquo;s ether balance.</li><li>Code: bytecode of the smart contract deployed at this address.</li><li>Storage: space used by smart contracts to store data.</li><li>Nonce: a serial integer that&rsquo;s used to protect against replay attacks.</li></ol><p>Ethereum&rsquo;s main job is building and maintaining this data in a secure way that doesn&rsquo;t allow unauthorized access.</p><p>Ethereum is also a network, a network of computers that build and maintain the state independently of each other. The
main goal of the network is to <strong>decentralize access to the database</strong>: there must be no single authority that&rsquo;s allowed
to modify anything in the database unilaterally. This is achieved by a means of <em>consensus</em>, which is a set of rules all
the nodes in the network follow. If one party decides to abuse a rule, it&rsquo;ll be excluded from the network.</p><blockquote><p>Fun fact: blockchain can use MySQL! Nothing prevents this besides performance. In its turn, Ethereum uses
<a href=https://github.com/google/leveldb>LevelDB</a>, a fast key-value database.</p></blockquote><p>Every Ethereum node also runs EVM, Ethereum Virtual Machine. A virtual machine is a program that can run other programs,
and EVM is a program that executes smart contracts. Users interact with contracts through transactions: besides simply
sending ether, transactions can contain smart contract call data. It includes:</p><ol><li>An encoded contract function name.</li><li>Function parameters.</li></ol><p>Transactions are packed in blocks and blocks then mined by miners. Each participant of the network can validate any
transaction and any block.</p><p>In a sense, smart contracts are similar to JSON APIs but instead of endpoints you call smart contract functions and you
provide function arguments. Similar to API backends, smart contracts execute programmed logic, which can optionally modify
smart contract storage. Unlike JSON API, you need to send a transaction to mutate blockchain state, and you&rsquo;ll need to
pay for each transaction you&rsquo;re sending.</p><p>Finally, Ethereum nodes expose a JSON-RPC API. Through this API we can interact with a node to: get account balance,
estimate gas costs, get blocks and transactions, send transactions, and execute contract calls without sending
transactions (this is used to read data from smart contracts). <a href=https://eth.wiki/json-rpc/API>Here</a> you can find the
full list of available endpoints.</p><blockquote><p>Transactions are also sent through the JSON-RPC API, see <a href=https://ethereum.org/en/developers/docs/apis/json-rpc/#eth_sendtransaction>eth_sendTransaction</a>.</p></blockquote><h2 id=local-development-environment>Local Development Environment
<a class=anchor href=#local-development-environment>#</a></h2><p>We&rsquo;re going to build smart contracts and run them on Ethereum, which means we need a node. Until recently, for both
testing and running contracts locally you needed a node. This used to make smart contracts development somewhat tedious
because running dozens (if not hundreds) tests in a real node is slow. Nowadays, luckily, we have a faster solution.</p><p>Another problems with solutions like <a href=https://trufflesuite.com>Truffle</a> and <a href=https://hardhat.org>Hardhat</a> is that we
we have to use JavaScript to write tests and program interactions with the blockchain. This need comes from the fact that
Truffle and Hardhat run a local node and use JavaScript Web3 libraries to interact with it.</p><p>Instead of using Truffle or Hardhat, we&rsquo;ll use Foundry.</p><h3 id=foundry>Foundry
<a class=anchor href=#foundry>#</a></h3><p><a href=https://github.com/foundry-rs/foundry>Foundry</a> is a set of tools for Ethereum applications development. Specifically,
we&rsquo;re going to use:</p><ol><li><a href=https://github.com/foundry-rs/foundry/tree/master/forge>Forge</a>, a testing framework for Solidity.</li><li><a href=https://github.com/foundry-rs/foundry/tree/master/anvil>Anvil</a>, a local Ethereum node designed for development with
Forge. We&rsquo;ll use it to deploy our contracts to a local node and connect to it through the front-end app.</li><li><a href=https://github.com/foundry-rs/foundry/tree/master/cast>Cast</a>, a CLI tool with a ton of helpful features.</li></ol><p>Forge makes smart contracts developer&rsquo;s life so much easier. With Forge, we don&rsquo;t need to run a local node to test
contracts. Instead, Forge runs tests on its internal EVM, which is much faster and doesn&rsquo;t require sending transactions
and mining blocks.</p><p>Forge lets us write tests in Solidity! Forge also makes it easier to simulate blockchain state: we can easily fake our
ether or token balance, execute contracts from other addresses, deploy any contracts at any address, etc.</p><p>However, we&rsquo;ll still need a local node to deploy our contract to. For that, we&rsquo;ll use Anvil. Front-end applications use
JavaScript Web3 libraries to interact with Ethereum nodes (to send transaction, query state, estimate transaction gas
cost, etc.)–this is why we&rsquo;ll need to run a local node.</p><h3 id=ethersjs>Ethers.js
<a class=anchor href=#ethersjs>#</a></h3><p><a href=https://github.com/ethers-io/ethers.js/>Ethers.js</a> is a set of Ethereum utilities written in JavaScript. This is one
of the two (the other one is <a href=https://github.com/ChainSafe/web3.js>web3.js</a>) most popular JavaScript libraries used in
decentralized applications development. These libraries allow us to interact with an Ethereum node via the JSON-API, and
they come with multiple utility functions that make developer&rsquo;s life easier.</p><h3 id=metamask>MetaMask
<a class=anchor href=#metamask>#</a></h3><p><a href=https://metamask.io/>MetaMask</a> is an Ethereum wallet in your browser. It&rsquo;s a browser extension that creates and securely
stores Ethereum private keys. MetaMask is the main Ethereum wallet application used by millions of users. We&rsquo;ll use it
to sign transactions that we&rsquo;ll send to our local node.</p><h3 id=react>React
<a class=anchor href=#react>#</a></h3><p><a href=https://reactjs.org/>React</a> is a well-known JavaScript library for building front-end applications. You don&rsquo;t need to
know React, I&rsquo;ll provide a template application.</p><h2 id=setting-up-the-project>Setting Up the Project
<a class=anchor href=#setting-up-the-project>#</a></h2><p>To set up the project, create a new folder and run <code>forge init</code> in it:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ mkdir uniswapv3clone
</span></span><span style=display:flex><span>$ cd uniswapv3clone
</span></span><span style=display:flex><span>$ forge init
</span></span></code></pre></div><blockquote><p>If you&rsquo;re using Visual Studio Code, add <code>--init</code> flag to <code>forge init</code>: <code>forge init --vscode</code>. Forge will initialize
the project with VSCode specific settings.</p></blockquote><p>Forge will create sample contracts in <code>src</code>, <code>test</code>, and <code>script</code> folders–these can be removed.</p><p>To set up the front-end application:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ npx create-react-app ui
</span></span></code></pre></div><p>It&rsquo;s located in a subfolder so there&rsquo;s no conflict between folder names.</p></article><footer class=book-footer><div class="flex flex-wrap justify-between"></div><script>(function(){function e(n){const e=window.getSelection(),t=document.createRange();t.selectNodeContents(n),e.removeAllRanges(),e.addRange(t)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#development-environment>Development environment</a><ul><li><a href=#quick-introduction-to-ethereum>Quick Introduction to Ethereum</a></li><li><a href=#local-development-environment>Local Development Environment</a><ul><li><a href=#foundry>Foundry</a></li><li><a href=#ethersjs>Ethers.js</a></li><li><a href=#metamask>MetaMask</a></li><li><a href=#react>React</a></li></ul></li><li><a href=#setting-up-the-project>Setting Up the Project</a></li></ul></li></ul></nav></div></aside></main></body></html>